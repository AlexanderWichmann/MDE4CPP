description 'MDE4CPP root project'

task buildAll() {
	group 'MDE4CPP'
	description 'build generators and all models'
	
	dependsOn 'generator:createAllGenerators'
	dependsOn 'src:buildEcoreModels'
	dependsOn 'src:buildReflectionModels'
	dependsOn 'src:common:pluginFramework:compilePluginFramework'
	dependsOn 'src:common:persistence:compilePersistence'
	dependsOn 'src:deliverBasicInterfaces'
}

task compileAll() {
	group 'MDE4CPP'
	description 'compile all models without generating the models'
	
	dependsOn 'src:compileEcoreModels'
	dependsOn 'src:compileReflectionModels'
	dependsOn 'src:common:pluginFramework:compilePluginFramework'
	dependsOn 'src:common:persistence:compilePersistence'
	dependsOn 'src:deliverBasicInterfaces'
}

task generateAll() {
	group 'MDE4CPP'
	description 'compile all models without generating the models'
	
	dependsOn 'src:generateEcoreModels'
	dependsOn 'src:generateReflectionModels'
}

task installationInstruction() {
	group 'MDE4CPP'

	description	'##############################################################################\n' +
				'#                    Installation instruction for MDE4CPP                    #\n' +
				'##############################################################################\n' +
				'\n' +
				'Welcome to MDE4CPP framework!\n' +
				'To start the work with MDE4CPP, you have to configure the environment settings.\n' +
				'A pattern is prepared for it:\n' +
				'- for Windows systems: setenv.bat.default\n' +
				'- for Unix systems: setenv.default.\n' +
				'Copy the file and remove the extension \'default\' first.\n' +
				'Open this file and configure the variables afterwards.\n' +
				'Run the file in a console. Note, that the environment is set inside the console\n' +
				'and has to be redone at each season start\n' +
				'\n'
	
	def files = file("$projectDir").listFiles(new FileFilter() {
		public boolean accept(File pathname) {
			return pathname.getName().endsWith(".bat");
		}
	})
	
	if (files.length == 0) {
		println description
	} else {
		doFirst {
			println description
		}
	}
}